#!/bin/bash

echo "Usage: trac-removeUser.sh [user] [permission 'X' for all]"

pushd .

cd /var/trac/

for x in `ls`; do    
   if [ $2 == "X" ]; then
           echo "Removing all $1 permissions"
	   for y in `trac-admin $x permission list $1 | grep $1 | cut -d ' ' -f 3`; do
	        echo "Removing $1:$y from: $x";
	   	trac-admin /var/trac/$x permission remove $1 $y;
	   done
   else 
          echo "Removing $1:$2 from: $x"
	  trac-admin /var/trac/$x permission remove $1 $2; 
   fi
done

cd `popd`
